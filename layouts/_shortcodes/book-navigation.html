{{ $frontmatterMenu := first 1 $.Page.Params.menu }}

{{ $currentPageTitle := .Page.Title }}


<div class="table-of-contents book-table-of-contents">
  <h2>Contents</h2>

  <ul>
    {{ range (index .Site.Menus $frontmatterMenu).Sort.ByWeight }}

      {{ with .Page }}
        <li {{ if eq $currentPageTitle .Title }}class="selected"{{ end }}>
          <a href="{{ .RelPermalink }}">
            {{ .Title }}
          </a>
        </li>
      {{ end }}

    {{ end }}

  </ul>
</div>
